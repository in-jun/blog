+++
title = 'REST API: 원칙부터 고려 사항까지'
date = 2024-07-20T16:23:17+09:00
categories = ["programming"]
tags = ["rest", "api", "design"]
draft = false
+++

## 서론

현대 웹 개발에서 REST(Representational State Transfer) API는 핵심적인 역할을 한다. 잘 설계된 REST API는 시스템 간의 효율적인 통신을 가능하게 하며, 개발자의 생산성을 크게 향상한다. 이 글에서는 REST의 기본 개념부터 시작해 6가지 핵심 원칙, 그리고 실제 API 설계 시 적용할 수 있는 구체적인 규칙과 모범 사례까지 포괄적으로 다루겠다.

## REST의 기본 개념

REST는 2000년 로이 필딩(Roy Fielding)의 박사 학위 논문에서 소개된 소프트웨어 아키텍처 스타일이다. REST는 웹의 기존 기술과 HTTP 프로토콜을 그대로 활용해 분산 하이퍼미디어 시스템을 위한 아키텍처를 제시한다.

REST의 주요 구성 요소는 다음과 같다:

1. **리소스 (Resources)**: 모든 정보는 고유한 식별자를 가진 리소스로 표현된다.
2. **메서드 (Methods)**: HTTP 메서드(GET, POST, PUT, DELETE 등)를 사용해 리소스에 대한 행위를 정의한다.
3. **표현 (Representations)**: 클라이언트와 서버가 데이터를 주고받는 형태로, 주로 JSON형식을 사용한다.

## REST의 6가지 원칙

REST는 다음 6가지 원칙을 기반으로 한다:

### 1. 클라이언트-서버 (Client-Server)

-   **설명**: 클라이언트와 서버의 관심사를 분리한다.
-   **장점**:
    -   클라이언트와 서버가 독립적으로 발전할 수 있다.
    -   시스템의 확장성이 향상된다.
-   **구현 방법**:
    -   명확한 인터페이스 정의
    -   서버는 데이터 저장, 클라이언트는 사용자 인터페이스 담당

### 2. 무상태 (Stateless)

-   **설명**: 각 요청은 독립적이며, 서버는 클라이언트의 상태를 저장하지 않는다.
-   **장점**:
    -   높은 신뢰성과 확장성
    -   서버 리소스의 효율적 사용
-   **구현 방법**:
    -   세션 상태를 클라이언트 측에서 관리
    -   모든 필요한 정보를 요청에 포함

### 3. 캐시 가능 (Cacheable)

-   **설명**: 응답은 캐시 가능 여부를 명시해야 한다.
-   **장점**:
    -   성능 향상
    -   서버 부하 감소
-   **구현 방법**:
    -   HTTP 캐시 헤더 사용 (Cache-Control, ETag 등)
    -   응답에 캐시 정책 명시

### 4. 계층화 시스템 (Layered System)

-   **설명**: 클라이언트는 직접 연결된 계층만 알면 된다.
-   **장점**:
    -   시스템 확장성 향상
    -   보안성 강화
-   **구현 방법**:
    -   프록시, 게이트웨이 사용
    -   마이크로서비스 아키텍처 적용

### 5. 코드 온 디맨드 (Code on Demand, 선택사항)

-   **설명**: 서버가 클라이언트로 실행할 수 있는 코드를 전송할 수 있다.
-   **장점**: 클라이언트 기능의 동적 확장
-   **구현 방법**: JavaScript를 통한 클라이언트 측 스크립팅

### 6. 인터페이스 일관성 (Uniform Interface)

-   **설명**: REST의 핵심 원칙으로, 다음 네 가지 제약 조건을 포함한다:
    1. 리소스 식별
    2. 표현을 통한 리소스 조작
    3. 자기 서술적 메시지
    4. 하이퍼미디어를 통한 애플리케이션 상태 변화 (HATEOAS)
-   **장점**:
    -   시스템 아키텍처 단순화
    -   클라이언트-서버 독립성 향상
-   **구현 방법**:
    -   일관된 리소스 명명 규칙
    -   HTTP 메서드의 적절한 사용
    -   응답에 하이퍼링크 포함 (HATEOAS)

## REST API 설계 규칙

효과적인 REST API 설계를 위한 구체적인 규칙들을 살펴보자:

### 1. 리소스 중심의 URL 설계

-   명사를 사용해 리소스 표현 (예: `/users`, `/articles`)
-   복수형 사용 권장
-   일관된 대소문자 사용 (소문자 권장)
-   하이픈(-) 사용, 언더스코어(\_) 지양

예:

-   좋은 예: `/api/users`, `/api/blog-posts`
-   나쁜 예: `/api/getUsers`, `/api/blog_posts`

### 2. HTTP 메서드의 올바른 사용

-   GET: 리소스 조회
-   POST: 새 리소스 생성
-   PUT: 리소스 전체 수정
-   PATCH: 리소스 부분 수정
-   DELETE: 리소스 삭제

예:

-   사용자 조회: GET /users
-   새 사용자 생성: POST /users
-   사용자 정보 전체 수정: PUT /users/{id}
-   사용자 정보 일부 수정: PATCH /users/{id}

### 3. 적절한 HTTP 상태 코드 사용

-   200: 성공
-   201: 생성 성공
-   204: 성공 (응답 본문 없음)
-   400: 잘못된 요청
-   401: 인증 필요
-   403: 권한 없음
-   404: 리소스 없음
-   500: 서버 내부 오류

### 4. 버전 관리

-   URL에 버전 정보 포함: `/api/v1/users`
-   헤더를 통한 버전 지정: `Accept: application/vnd.myapp.v1+json`

### 5. 필터링, 정렬, 페이징 지원

-   필터링: `/users?role=admin`
-   정렬: `/users?sort=name:asc,created_at:desc`
-   페이징: `/users?page=2&per_page=100`

### 6. HATEOAS 구현

응답에 관련 리소스의 링크를 포함:

```json
{
    "id": 711,
    "name": "John Doe",
    "_links": {
        "self": { "href": "/users/711" },
        "posts": { "href": "/users/711/posts" }
    }
}
```

### 7. 에러 처리

일관된 에러 응답 형식 사용:

```json
{
    "status": 400,
    "code": "INVALID_EMAIL",
    "message": "The provided email is invalid",
    "details": "The email 'johndoe@' is missing a domain name"
}
```

## REST API 구현 시 고려 사항

### 1. 보안

-   HTTPS 사용 강제
-   적절한 인증 및 권한 부여 메커니즘 구현 (OAuth, JWT 등)
-   속도 제한 (Rate Limiting) 구현

### 2. 성능 최적화

-   캐싱 전략 (ETag, Cache-Control 헤더 활용)
-   응답 압축 (gzip 등)
-   페이로드 최소화 (필요한 데이터만 반환)

### 3. 문서화

-   OpenAPI (Swagger) 사용
-   예제 요청 및 응답 제공
-   변경 이력 관리

## REST의 한계와 대안

REST는 많은 장점을 가지고 있지만, 모든 상황에 최적의 솔루션은 아니다:

-   실시간 통신이 필요한 경우: WebSocket 고려
-   복잡한 데이터 요구사항: GraphQL 검토
-   고성능이 필요한 경우: gRPC 등의 대안 고려

## 결론

REST API 설계는 단순히 기술적인 결정이 아닌 사용자 경험과 비즈니스 요구사항을 모두 고려해야 하는 복잡한 과정이다. 이 글에서 다룬 원칙과 규칙들을 기반으로 하되, 각 프로젝트의 특성에 맞게 유연하게 적용하는 것이 중요하다.
