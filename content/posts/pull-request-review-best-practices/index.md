---
title: "Pull Request 리뷰 모범 사례"
date: 2024-07-31T22:06:49+09:00
tags: ["Git", "코드리뷰", "협업"]
description: "효과적인 Pull Request 작성과 코드 리뷰 방법을 설명한다."
draft: false
---

PR(Pull Request) 리뷰는 팀의 코드 품질을 향상시키고 개발자 간 지식을 공유하며 잠재적 버그를 사전에 방지하는 협업의 핵심 활동으로, 2008년 GitHub가 Pull Request 기능을 도입한 이후 오픈소스 프로젝트와 기업 개발 환경에서 표준적인 코드 통합 방식으로 자리잡았다. PR 리뷰는 단순히 코드의 오류를 찾는 과정을 넘어 팀원들이 서로의 코드를 이해하고, 일관된 코드베이스를 유지하며, 집단 지성을 통해 더 나은 설계 결정을 내릴 수 있게 해주는 소프트웨어 개발의 필수적인 품질 관리 활동이다.

## 코드 리뷰의 역사와 PR 리뷰의 발전

> **코드 리뷰란?**
>
> 작성된 코드를 다른 개발자가 검토하여 버그, 설계 문제, 코딩 표준 위반 등을 발견하고 코드 품질을 개선하는 소프트웨어 품질 보증 활동이다.

코드 리뷰의 역사는 1970년대로 거슬러 올라가며, IBM의 Michael Fagan이 1976년에 "Fagan Inspection"이라는 체계적인 코드 검토 방법론을 발표하면서 소프트웨어 업계에 본격적으로 도입되기 시작했다. 당시의 코드 리뷰는 여러 명의 개발자가 회의실에 모여 인쇄된 코드를 한 줄씩 검토하는 형식적인 인스펙션(Formal Inspection) 방식이었으며, 이 방법은 효과적이었지만 시간과 인력이 많이 소요되는 단점이 있었다.

2000년대 들어 분산 버전 관리 시스템(DVCS)의 발전과 함께 코드 리뷰 방식도 진화했으며, 2005년 Git의 등장과 2008년 GitHub의 Pull Request 기능 도입은 비동기적이고 분산된 환경에서도 효과적인 코드 리뷰가 가능하게 만드는 혁신적인 변화였다. 이후 GitLab의 Merge Request, Bitbucket의 Pull Request 등 유사한 기능이 다른 플랫폼에서도 도입되면서 PR 기반의 코드 리뷰는 현대 소프트웨어 개발의 표준 워크플로우로 정착했다.

## PR 리뷰의 목적과 가치

PR 리뷰는 다양한 목적과 가치를 제공하며, 단순한 오류 검출을 넘어 팀 전체의 역량을 향상시키는 다차원적인 활동이다.

### 코드 품질 향상

한 명의 개발자가 작성한 코드를 다른 시각에서 검토함으로써 미처 발견하지 못한 버그, 엣지 케이스, 성능 문제 등을 사전에 식별할 수 있으며, 연구에 따르면 코드 리뷰를 통해 결함의 60-70%를 출시 전에 발견할 수 있다고 알려져 있다.

### 지식 공유와 학습

리뷰어는 다른 개발자의 코드를 읽으면서 새로운 기술이나 패턴을 학습할 수 있고, 작성자는 피드백을 통해 더 나은 코딩 방법을 배울 수 있으며, 이 과정에서 팀 전체의 코드베이스에 대한 이해도가 높아지고 Bus Factor(특정 인원이 없으면 프로젝트가 멈추는 위험)가 줄어든다.

### 코드 일관성 유지

팀의 코딩 컨벤션, 아키텍처 패턴, 네이밍 규칙 등을 일관되게 유지할 수 있으며, 자동화된 린터나 포매터가 잡지 못하는 설계 수준의 일관성도 리뷰를 통해 관리할 수 있다.

### 집단 지성 활용

복잡한 문제에 대해 여러 개발자의 다양한 시각과 경험을 활용하여 더 나은 해결책을 찾을 수 있으며, 한 명이 놓친 문제를 다른 팀원이 발견하거나 더 효율적인 접근 방식을 제안하는 시너지 효과가 발생한다.

### 코드 소유권 공유

PR 리뷰를 통해 특정 코드에 대한 지식이 작성자 한 명에게만 집중되지 않고 팀 전체에 분산되며, 이를 통해 팀원의 이직이나 휴가 시에도 코드 유지보수가 가능해지고 전체적인 팀 탄력성이 향상된다.

## PR 리뷰 체크리스트

효과적인 PR 리뷰를 위해서는 체계적인 검토 기준이 필요하며, 다음 항목들을 확인하면 일관되고 포괄적인 리뷰가 가능하다.

### 기능적 정확성

- PR의 목적(이슈, 요구사항)을 충족하는가?
- 모든 엣지 케이스가 적절히 처리되었는가?
- 에러 핸들링이 적절한가?
- 기존 기능에 영향을 주지 않는가(사이드 이펙트)?

### 코드 품질

- 코딩 컨벤션과 스타일 가이드를 준수하는가?
- 함수와 클래스가 단일 책임 원칙을 따르는가?
- 불필요한 코드 중복이 없는가?
- 네이밍이 명확하고 의미 있는가?
- 코드가 읽기 쉽고 이해하기 쉬운가?

### 성능 및 확장성

- N+1 쿼리, 불필요한 루프 등 명백한 성능 문제가 없는가?
- 메모리 사용량이 적절한가?
- 대용량 데이터 처리 시 확장성이 고려되었는가?
- 캐싱이 필요한 곳에 적절히 적용되었는가?

### 보안

- 사용자 입력이 적절히 검증되고 이스케이프되었는가?
- 인증과 권한 검사가 올바르게 구현되었는가?
- 민감 정보(비밀번호, API 키 등)가 노출되지 않았는가?
- SQL 인젝션, XSS 등 일반적인 보안 취약점이 없는가?

### 테스트

- 새로운 기능에 대한 테스트가 작성되었는가?
- 테스트가 의미 있는 케이스를 커버하는가?
- 기존 테스트가 모두 통과하는가?
- 테스트 코드도 가독성과 유지보수성이 좋은가?

### 문서화

- 복잡한 로직에 적절한 주석이 있는가?
- API 변경 시 문서가 업데이트되었는가?
- README나 CHANGELOG 업데이트가 필요한가?

## 코멘트 레벨 구분

PR 리뷰에서 피드백의 중요도와 의도를 명확히 전달하기 위해 접두사를 사용하는 것이 권장되며, 이를 통해 작성자는 어떤 피드백을 반드시 수정해야 하고 어떤 것은 선택적인지 빠르게 파악할 수 있다.

### Blocking (차단)

> `[blocking]` 또는 `[필수]`

반드시 수정되어야 하며, 수정되지 않으면 PR이 승인될 수 없는 중대한 문제를 나타낸다. 보안 취약점, 심각한 버그, 데이터 손실 가능성, 아키텍처 원칙 위반 등이 이에 해당한다.

```
[blocking] 이 API 엔드포인트에 인증 미들웨어가 누락되어 인증되지 않은 사용자도 접근할 수 있습니다.
`requireAuth()` 미들웨어를 라우터에 추가해주세요.

[blocking] 이 코드는 SQL 인젝션 취약점이 있습니다.
문자열 연결 대신 파라미터화된 쿼리를 사용해주세요:
```python
# 현재 (취약)
query = f"SELECT * FROM users WHERE id = {user_id}"

# 수정 후 (안전)
query = "SELECT * FROM users WHERE id = %s"
cursor.execute(query, (user_id,))
```
```

### Suggestion (제안)

> `[suggestion]` 또는 `[제안]`

개선을 권장하지만 필수는 아닌 사항으로, 성능 최적화, 가독성 향상, 더 나은 설계 패턴 적용 등이 포함된다. 작성자의 판단에 따라 수용 여부를 결정할 수 있다.

```
[suggestion] 이 함수는 세 가지 책임(검증, 변환, 저장)을 가지고 있습니다.
단일 책임 원칙을 위해 다음과 같이 분리하는 것을 고려해보세요:
- `validateUserInput()`: 입력 검증
- `transformUserData()`: 데이터 변환
- `saveUser()`: 데이터 저장

[suggestion] 이 반복문에서 배열 길이를 매번 계산하고 있습니다.
length를 변수에 캐싱하면 약간의 성능 향상이 있을 수 있습니다:
```javascript
// 현재
for (let i = 0; i < items.length; i++) { ... }

// 제안
const len = items.length;
for (let i = 0; i < len; i++) { ... }
```
```

### Nit (사소한 지적)

> `[nit]` 또는 `[사소]`

매우 사소한 지적으로, 변수명, 띄어쓰기, 주석 오타 등 코드의 동작에는 영향을 주지 않지만 일관성이나 가독성을 위해 언급하는 사항이다. 수정하면 좋지만 하지 않아도 PR 승인에는 영향이 없다.

```
[nit] 변수명 `temp`보다는 `cachedUserProfile`이 더 의도를 명확히 전달할 것 같습니다.

[nit] 이 주석에 오타가 있습니다: "recieve" → "receive"

[nit] 이 함수의 파라미터 순서를 `(userId, options)` → `(options, userId)`로 변경하면
프로젝트의 다른 함수들과 일관성이 유지됩니다.
```

### Question (질문)

> `[question]` 또는 `[질문]`

코드를 이해하기 위한 질문으로, 특정 설계 결정의 이유, 예상치 못한 접근 방식, 또는 문맥 파악을 위해 사용한다. 리뷰어의 이해를 돕고 때로는 작성자가 자신의 결정을 재고하게 만드는 계기가 될 수 있다.

```
[question] 이 로직에서 Redis 대신 메모리 캐시를 사용한 이유가 있을까요?
여러 인스턴스에서 캐시 일관성 문제가 발생할 수 있을 것 같아서 여쭤봅니다.

[question] 이 예외를 여기서 삼키고(catch 후 무시) 있는데, 의도된 동작인가요?
로깅이라도 추가해야 디버깅이 쉬울 것 같습니다.
```

### Praise (칭찬)

> `[praise]` 또는 `[칭찬]`

잘 작성된 코드, 창의적인 해결책, 또는 개선된 부분에 대한 긍정적 피드백으로, 리뷰가 단순히 문제점만 지적하는 활동이 아니라 좋은 코드를 인정하고 장려하는 활동임을 보여준다.

```
[praise] 이 에러 핸들링 로직이 정말 깔끔합니다!
모든 엣지 케이스를 잘 고려했네요.

[praise] 복잡한 비즈니스 로직을 이렇게 가독성 좋게 정리한 것 인상적입니다.
Strategy 패턴 적용도 적절합니다.
```

## 효과적인 PR 리뷰 방법

### 맥락 파악 먼저

리뷰를 시작하기 전에 PR의 목적, 관련 이슈, 티켓 번호, 설계 문서 등을 먼저 확인해야 하며, 맥락 없이 코드만 보면 불필요한 피드백을 하거나 작성자의 의도를 오해할 수 있다.

### 전체 구조 파악 후 세부 사항 검토

변경된 파일 목록을 먼저 훑어보고 전체적인 변경 범위와 구조를 파악한 후, 핵심 로직부터 검토하고 세부적인 스타일 이슈는 나중에 확인하는 것이 효율적이다.

### 구체적이고 실행 가능한 피드백

문제를 지적할 때는 구체적으로 무엇이 문제인지, 왜 문제인지, 어떻게 개선할 수 있는지를 함께 제시해야 하며, 모호한 피드백은 작성자에게 혼란을 주고 불필요한 커뮤니케이션 비용을 발생시킨다.

**나쁜 예시**:
```
"이 코드는 개선이 필요합니다."
"성능이 안 좋을 것 같습니다."
"이건 좀 이상한데요."
```

**좋은 예시**:
```
"[suggestion] 이 함수에서 데이터베이스를 세 번 호출하고 있습니다.
JOIN을 사용하여 단일 쿼리로 통합하면 네트워크 라운드트립을 줄일 수 있습니다.
예시: SELECT u.*, p.* FROM users u JOIN profiles p ON u.id = p.user_id WHERE u.id = ?"
```

### 코드 작성자 존중

피드백은 코드에 대한 것이지 작성자 개인에 대한 것이 아니며, "이 코드"라는 표현을 사용하고 "당신" 또는 "너"라는 표현은 피하는 것이 좋다.

**나쁜 예시**:
```
"왜 이렇게 했나요?"
"이건 잘못되었습니다."
"당신은 항상 이런 실수를 합니다."
```

**좋은 예시**:
```
"이 접근 방식을 선택한 이유가 궁금합니다. 다른 방법도 고려해보셨나요?"
"이 부분에서 예상치 못한 동작이 발생할 수 있습니다. 이 케이스를 고려해보세요."
"이 패턴은 이러이러한 문제가 있을 수 있습니다. 대안으로 이 방법은 어떨까요?"
```

### 적절한 PR 크기 유지 권장

연구에 따르면 400줄 이상의 변경이 있는 PR에서는 리뷰 효과가 급격히 감소하며, 큰 PR은 작은 단위로 나누어 제출하도록 권장하는 것이 좋다. 하지만 이미 제출된 큰 PR에 대해서는 현실적으로 대응하되, 향후 개선 방향을 제안할 수 있다.

### 시기적절한 리뷰

PR이 오래 방치되면 컨텍스트 스위칭 비용이 증가하고 병합 충돌 가능성이 높아지므로, 가능한 24시간 이내에 첫 리뷰를 제공하는 것이 좋다. 리뷰가 지연될 것으로 예상되면 작성자에게 미리 알리는 것이 바람직하다.

## 리뷰어와 작성자의 역할

### 리뷰어의 역할

- 건설적이고 구체적인 피드백 제공
- 피드백의 중요도를 명확히 구분 (blocking, suggestion, nit)
- 질문을 통해 작성자의 의도 이해
- 좋은 코드에 대한 긍정적 피드백 제공
- 시기적절하게 리뷰 완료
- 개인적 취향이 아닌 객관적 기준으로 평가

### 작성자의 역할

- PR 설명을 상세히 작성 (목적, 배경, 변경 사항, 테스트 방법)
- 리뷰하기 쉬운 적절한 크기의 PR 제출
- 피드백에 열린 마음으로 대응
- blocking 피드백은 반드시 수정
- 수정 사항에 대해 명확히 응답
- 의견 차이가 있을 경우 근거를 가지고 토론

## 건강한 리뷰 문화 구축

### 심리적 안전감 조성

팀원들이 실수를 두려워하지 않고 피드백을 주고받을 수 있는 환경을 만들어야 하며, 리뷰는 비난이 아니라 코드 품질 향상을 위한 협력 활동임을 모든 팀원이 인식해야 한다.

### 리뷰 가이드라인 문서화

팀의 리뷰 기준, 코멘트 레벨 정의, 기대되는 응답 시간 등을 문서화하여 공유하면 일관된 리뷰 문화를 유지할 수 있으며, 새로운 팀원의 온보딩에도 도움이 된다.

### 자동화와 사람의 역할 분리

린터, 포매터, 정적 분석 도구, CI 테스트 등으로 자동화할 수 있는 검사는 자동화하고, 사람은 설계, 로직, 비즈니스 요구사항 충족 등 기계가 판단하기 어려운 영역에 집중하는 것이 효율적이다.

### 리뷰 부하 분산

특정 팀원에게 리뷰가 집중되지 않도록 로테이션하거나 CODEOWNERS 파일을 활용하여 적절히 분배하며, 모든 팀원이 리뷰 역량을 키울 수 있는 기회를 제공해야 한다.

## 결론

PR 리뷰는 1970년대 Fagan Inspection에서 시작된 코드 리뷰의 현대적 진화 형태로, GitHub가 2008년 Pull Request를 도입한 이후 소프트웨어 개발의 표준 품질 관리 활동으로 자리잡았다. 효과적인 PR 리뷰를 위해서는 blocking, suggestion, nit, question, praise 등 피드백 레벨을 명확히 구분하고, 구체적이고 실행 가능한 피드백을 제공하며, 코드에 대한 비판과 작성자에 대한 존중을 분리하는 것이 중요하다. 건강한 리뷰 문화는 단순히 버그를 찾는 것을 넘어 팀의 집단 지성을 활용하고 지식을 공유하며 전체적인 코드 품질과 팀 역량을 향상시키는 핵심 활동이며, 심리적 안전감을 바탕으로 건설적인 피드백을 주고받는 문화를 구축하는 것이 성공적인 소프트웨어 개발의 필수 요소이다.
