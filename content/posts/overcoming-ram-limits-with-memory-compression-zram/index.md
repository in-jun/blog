---
title: "메모리 압축(ZRAM)으로 RAM 한계 넘기기"
date: 2025-05-02T12:12:58+09:00
draft: false
description: "Ubuntu 24.04에서 zram을 활용한 메모리 최적화 방법"
tags:
    [
        "리눅스",
        "커널",
        "zram",
        "메모리 관리",
        "압축",
        "스왑",
        "성능 최적화",
        "시스템 리소스",
        "Ubuntu 24.04",
        "설치 가이드",
    ]
---

## zram의 개념과 원리

zram(이전 명칭: compcache)은 리눅스 커널에서 제공하는 메모리 압축 기술로, RAM의 일부를 압축하여 가상 블록 장치로 사용하는 메커니즘이다. 이 기술은 2009년 Nitin Gupta에 의해 처음 개발되었으며, 리눅스 커널 3.14부터 정식으로 통합되었다. zram의 핵심 아이디어는 디스크 기반 스왑 대신 압축된 RAM을 스왑 공간으로 활용함으로써, 디스크 I/O의 부하 없이 메모리 사용량을 줄이는 것이다.

zram 장치는 데이터를 메모리에 저장하기 전에 실시간으로 압축하고, 데이터 접근 시 실시간으로 압축을 해제한다. 이 과정에서 CPU 리소스를 일부 소모하지만, 디스크 I/O를 피할 수 있어 전체적인 시스템 성능 향상에 기여한다. 일반적으로 zram은 LZO, LZ4, ZSTD와 같은 고속 압축 알고리즘을 사용하여 2:1에서 4:1 정도의 압축률을 달성한다.

## zram의 주요 장점

### 메모리 용량 확장

zram의 가장 큰 장점은 물리적인 메모리 확장 없이도 가용 메모리를 효과적으로 늘릴 수 있다는 점이다. 텍스트 데이터가 많은 환경에서는 최대 4배까지 압축률을 달성할 수 있으며, 평균적으로도 약 2배의 압축률을 보인다. 이는 8GB RAM 시스템에서 실질적으로 12-16GB 정도의 메모리 효과를 볼 수 있음을 의미한다.

### 시스템 응답성 향상

디스크 기반 스왑은 접근 속도가 느려 시스템 응답성을 크게 저하시킨다. 반면 zram은 RAM 내에서 작동하므로 디스크 스왑보다 수백 배 빠른 속도로 데이터에 접근할 수 있다. 이는 메모리 부족 상황에서도 시스템 응답성을 유지하는 데 큰 도움이 된다. 특히 저사양 시스템이나 메모리가 제한된 환경에서 더욱 효과적이다.

### 디스크 수명 연장

SSD와 같은 저장 장치는 쓰기 횟수에 제한이 있어 스왑 사용이 많을수록 디스크 수명이 단축된다. zram은 디스크 기반 스왑 사용을 줄여 저장 장치의 수명을 연장하는 효과가 있다. 임베디드 시스템이나 저가형 SSD를 사용하는 환경에서 특히 중요한 이점이다.

### 전력 효율성

모바일 기기나 노트북에서는 디스크 I/O가 많을수록 전력 소모가 증가한다. zram은 디스크 접근을 줄여 배터리 수명을 연장하는 데 도움을 준다. 비록 압축/해제 과정에서 CPU를 사용하지만, 디스크 I/O 절감 효과가 더 크므로 전체적인 전력 효율성이 향상된다.

## Ubuntu 24.04에서의 zram 간편 설치 및 사용

Ubuntu 24.04에서는 zram을 설치하고 바로 사용하는 방법이 매우 간단하다. 단 한 번의 명령어로 설치하면 자동으로 설정되어 즉시 사용할 수 있다:

```bash
sudo apt install zram-config
```

이 명령어로 zram-config 패키지를 설치하면 시스템이 자동으로 zram을 설정하고 활성화한다. 별도의 재부팅이나 추가 설정 없이도 즉시 적용된다.

### 기본 설정

Ubuntu 24.04에서 zram-config 패키지를 설치하면 다음과 같은 기본 설정이 자동으로 적용된다:

-   RAM의 약 50%를 zram 크기로 설정
-   압축 알고리즘은 효율적인 LZ4 사용
-   스왑 우선순위 100으로 설정 (디스크 스왑보다 우선 사용)
-   시스템 부팅 시 자동으로 활성화

이 기본 설정은 대부분의 사용자에게 적합하며, 별도의 추가 조정 없이도 즉시 성능 향상 효과를 볼 수 있다.

### 설치 확인

설치 후 zram이 정상적으로 작동하는지 확인하려면 다음 명령어를 사용하면 된다:

```bash
zramctl
```

또는

```bash
swapon --show
```

출력 결과에 `/dev/zram0`가 표시되면 zram이 정상적으로 설치되고 활성화된 것이다.

## zram 사용 시 고려사항

-   대부분의 일반적인 사용 환경에서 기본 설정으로도 충분한 성능 향상을 볼 수 있다.
-   매우 메모리 집약적인 응용 프로그램 사용 시 더 큰 성능 향상을 체감할 수 있다.
-   하이버네이션(절전 모드)이 필요한 경우 zram 대신 zswap 사용을 고려해야 한다.
-   메모리가 매우 충분한 시스템(32GB 이상)에서는 zram의 효과가 제한적일 수 있다.
-   CPU 부하가 이미 높은 환경에서는 압축/해제 과정에서 추가 부하가 발생할 수 있다.

## 결론

Ubuntu 24.04에서 zram은 단 한 번의 설치 명령으로 즉시 활용할 수 있는 강력한 메모리 최적화 기술이다. 특히 메모리가 제한된 시스템에서 성능을 크게 향상시킬 수 있으며, 디스크 수명 연장과 전력 효율성 측면에서도 장점이 있다. 기본 설정만으로도 충분한 효과를 얻을 수 있어 일반 사용자에게 매우 유용한 도구이다.

메모리 부족 현상을 겪고 있거나, 시스템 응답성 향상을 원하는 Ubuntu 24.04 사용자라면 zram-config 패키지 설치만으로도 즉각적인 개선 효과를 체감할 수 있을 것이다.
