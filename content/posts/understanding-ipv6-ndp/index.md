---
title: "IPv6 Neighbor Discovery Protocol(NDP) 쉽게 이해하기"
date: 2025-02-24T01:01:25+09:00
draft: false
description: "IPv6 네트워크에서 NDP(Neighbor Discovery Protocol)는 ARP를 대체하는 핵심 프로토콜이다. 자동 주소 구성(SLAAC), 보안 대책(SEND, RA Guard)과 함께 NDP의 동작 방식을 쉽게 설명한다."
tags:
    [
        "IPv6",
        "NDP",
        "NeighborDiscovery",
        "네트워크보안",
        "네트워크자동화",
        "IPv6프로토콜",
    ]
---

## 개요

IPv6 네트워크에서 Neighbor Discovery Protocol(NDP)은 네트워크 장치들 간의 상호작용을 관리하는 핵심 프로토콜이다. ARP, ICMP Router Discovery 등 IPv4의 여러 프로토콜 기능을 통합하여 더욱 효율적인 네트워크 관리가 가능하다.

### 주요 특징

-   멀티캐스트 기반 통신으로 네트워크 부하 감소
-   자동화된 주소 구성으로 관리 효율성 향상
-   보안 기능 강화로 안전한 네트워크 운영 지원

## 1. Neighbor Discovery의 핵심 기능

### 이웃 노드 검색

IPv6 네트워크에서 다른 장치의 MAC 주소를 자동으로 찾고 확인한다. 이는 IPv4의 ARP를 완전히 대체하는 핵심 기능이다.

### 자동 주소 설정

SLAAC를 통해 DHCP 서버 없이도 자동으로 IPv6 주소를 구성한다. 이는 대규모 네트워크에서 특히 유용하다.

### 라우터 발견

네트워크의 라우터를 자동으로 찾고 필요한 정보를 수집한다. 이를 통해 기본 게이트웨이 설정이 자동화된다.

## 2. NDP의 동작 방식과 메시지 흐름

### ICMPv6 메시지 유형

| 메시지                 | ICMPv6 타입 | 코드 | 용도             |
| ---------------------- | ----------- | ---- | ---------------- |
| Router Solicitation    | 133         | 0    | 라우터 정보 요청 |
| Router Advertisement   | 134         | 0    | 라우터 정보 제공 |
| Neighbor Solicitation  | 135         | 0    | MAC 주소 요청    |
| Neighbor Advertisement | 136         | 0    | MAC 주소 응답    |
| Redirect               | 137         | 0    | 경로 최적화      |

### 단계별 동작 과정

#### 1단계: 라우터 탐색

새로운 노드가 네트워크에 연결되면 우선 라우터를 찾는다:

```plaintext
호스트 -> FF02::2: "라우터 있나요?" (Router Solicitation)
라우터 -> FF02::1: "네, 프리픽스는 2001:db8::/64입니다" (Router Advertisement)
```

#### 2단계: 주소 자동 구성

호스트는 라우터가 제공한 정보를 바탕으로 IPv6 주소를 생성한다:

```plaintext
호스트: "2001:db8::1234 주소를 사용하겠습니다"
호스트 -> FF02::1: "이 주소 사용해도 되나요?" (DAD 체크)
(응답 없음 = 사용 가능)
```

#### 3단계: 이웃 탐색

실제 통신을 위해 이웃 노드의 MAC 주소를 찾는다:

```plaintext
노드A -> FF02::1:ff00:5678: "2001:db8::5678의 MAC 주소는?" (NS)
노드B -> 노드A: "제 MAC은 00:11:22:33:44:55입니다" (NA)
```

#### 4단계: 경로 최적화

라우터는 더 효율적인 경로가 있을 경우 이를 알려준다:

```plaintext
노드A -> 라우터: "2001:db8::9로 가려합니다"
라우터 -> 노드A: "2001:db8::7로 직접 가는 게 더 빠릅니다" (Redirect)
```

### DAD 처리 과정

중복 주소가 감지된 경우의 처리 과정:

```plaintext
1. 호스트A -> FF02::1: "2001:db8::1234 사용하려 함" (NS)
2. 호스트B -> 호스트A: "이미 사용 중" (NA)
3. 호스트A: EUI-64 기반 새 주소 생성
4. 호스트A -> FF02::1: "새 주소 2001:db8::5678 확인" (NS)
5. (응답 없음) -> 새 주소 사용 시작
```

## 자주 묻는 질문 (FAQ)

### Q1: NDP는 ARP와 어떤 차이가 있나요?

NDP는 IPv6 환경에서 사용되며, ARP보다 향상된 보안성과 자동화 기능을 제공한다. 멀티캐스트 기반 통신으로 네트워크 효율성도 높다.

### Q2: NDP 보안을 강화하려면 어떻게 해야 하나요?

SEND 프로토콜 적용과 RA Guard 설정이 필수적이다. 추가로 접근 제어 리스트(ACL)를 통한 필터링도 권장된다.

### Q3: IPv6 NDP를 차단할 수도 있나요?

가능하다. IPv6 방화벽에서 특정 ICMPv6 메시지를 차단하거나, RA Guard 설정을 통해 비인가 라우터 광고를 막을 수 있다.

### Q4: IPv6에서 ARP가 필요 없는 이유는?

IPv6는 ARP 대신 NDP를 사용하며, 이 과정은 ICMPv6 기반으로 동작하기 때문이다. NDP는 더 효율적이고 안전한 주소 해결 방식을 제공한다.

## 마치며

NDP는 IPv6 네트워크의 자동화와 효율성을 크게 향상시킨 프로토콜이다. 기존 IPv4의 여러 프로토콜을 통합하고 개선하여, 현대 네트워크의 복잡한 요구사항을 충족시킨다. 단계별 동작 과정을 이해하고 적절한 설정을 적용하면, 안정적이고 효율적인 네트워크 운영이 가능하다.

### 핵심 요약

-   IPv6 환경에서 ARP를 대체하는 핵심 프로토콜
-   자동화된 주소 관리와 경로 최적화 지원
-   보안 위협에 대비한 적절한 보호 기법 필요
